{"version":3,"sources":["ol/sidebar-v2/js/ol3-sidebar.js"],"names":["ol","control","Sidebar","settings","defaults","element","position","i","child","_options","Object","assign","Control","call","document","getElementById","target","classList","add","children","length","tagName","contains","_container","_tabitems","querySelectorAll","_sidebar","_panes","_closeButtons","push","closeButtons","j","len","inherits","prototype","setMap","map","sub","querySelector","hasAttribute","getAttribute","slice","onclick","_onClick","bind","_onCloseClick","open","id","remove","hash","close","evt","preventDefault"],"mappings":"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","file":"ol3-sidebar.c54f73bf.map","sourceRoot":"..","sourcesContent":["ol.control.Sidebar = function (settings) {\n\n    var defaults = {\n        element: null,\n        position: 'left'\n    }, i, child;\n\n    this._options = Object.assign({}, defaults, settings);\n\n    ol.control.Control.call(this, {\n        element: document.getElementById(this._options.element),\n        target: this._options.target\n    });\n\n    // Attach .sidebar-left/right class\n    this.element.classList.add('sidebar-' + this._options.position);\n\n    // Find sidebar > div.sidebar-content\n    for (i = this.element.children.length - 1; i >= 0; i--) {\n        child = this.element.children[i];\n        if (child.tagName === 'DIV' &&\n                child.classList.contains('sidebar-content')) {\n            this._container = child;\n        }\n    }\n\n    // Find sidebar ul.sidebar-tabs > li, sidebar .sidebar-tabs > ul > li\n    this._tabitems = this.element.querySelectorAll('ul.sidebar-tabs > li, .sidebar-tabs > ul > li');\n    for (i = this._tabitems.length - 1; i >= 0; i--) {\n        this._tabitems[i]._sidebar = this;\n    }\n\n    // Find sidebar > div.sidebar-content > div.sidebar-pane\n    this._panes = [];\n    this._closeButtons = [];\n    for (i = this._container.children.length - 1; i >= 0; i--) {\n        child = this._container.children[i];\n        if (child.tagName == 'DIV' &&\n                child.classList.contains('sidebar-pane')) {\n            this._panes.push(child);\n\n            var closeButtons = child.querySelectorAll('.sidebar-close');\n            for (var j = 0, len = closeButtons.length; j < len; j++) {\n                this._closeButtons.push(closeButtons[j]);\n            }\n        }\n    }\n};\n\nol.inherits(ol.control.Sidebar, ol.control.Control);\n\nol.control.Sidebar.prototype.setMap = function(map) {\n    var i, child;\n\n    for (i = this._tabitems.length - 1; i >= 0; i--) {\n        child = this._tabitems[i];\n        var sub = child.querySelector('a');\n        if (sub.hasAttribute('href') && sub.getAttribute('href').slice(0,1) == '#') {\n            sub.onclick = this._onClick.bind(child);\n        }\n    }\n\n    for (i = this._closeButtons.length - 1; i >= 0; i--) {\n        child = this._closeButtons[i];\n        child.onclick = this._onCloseClick.bind(this);\n    }\n};\n\nol.control.Sidebar.prototype.open = function(id) {\n    var i, child;\n\n    // hide old active contents and show new content\n    for (i = this._panes.length - 1; i >= 0; i--) {\n        child = this._panes[i];\n        if (child.id == id)\n            child.classList.add('active');\n        else if (child.classList.contains('active'))\n            child.classList.remove('active');\n    }\n\n    // remove old active highlights and set new highlight\n    for (i = this._tabitems.length - 1; i >= 0; i--) {\n        child = this._tabitems[i];\n        if (child.querySelector('a').hash == '#' + id)\n            child.classList.add('active');\n        else if (child.classList.contains('active'))\n            child.classList.remove('active');\n    }\n\n    // open sidebar (if necessary)\n    if (this.element.classList.contains('collapsed')) {\n        this.element.classList.remove('collapsed');\n    }\n\n    return this;\n};\n\nol.control.Sidebar.prototype.close = function() {\n    // remove old active highlights\n    for (var i = this._tabitems.length - 1; i >= 0; i--) {\n        var child = this._tabitems[i];\n        if (child.classList.contains('active'))\n            child.classList.remove('active');\n    }\n\n    // close sidebar\n    if (!this.element.classList.contains('collapsed')) {\n        this.element.classList.add('collapsed');\n    }\n\n    return this;\n};\n\nol.control.Sidebar.prototype._onClick = function(evt) {\n    evt.preventDefault();\n    if (this.classList.contains('active')) {\n        this._sidebar.close();\n    } else if (!this.classList.contains('disabled')) {\n        this._sidebar.open(this.querySelector('a').hash.slice(1));\n    }\n};\n\nol.control.Sidebar.prototype._onCloseClick = function() {\n    this.close();\n};\n"]}